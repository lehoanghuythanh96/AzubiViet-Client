"use strict";(self.webpackChunkazubi_client=self.webpackChunkazubi_client||[]).push([[830],{5834:(E,P,n)=>{n.d(P,{A:()=>R});var p=n(1974),O=n(9765),N=n(6782),k=n(2340),t=n(9002),Y=n(9328),e=n(7716),T=n(5817),U=n(9786),C=n(7001),Z=n(110),x=n(2238),A=n(8583),I=n(8295),M=n(1095);function l(u,y){if(1&u){const s=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"button",15),e.NdJ("click",function(){e.CHM(s);const f=e.oxw().$implicit;return e.oxw().userBlockEmail(f.ID)}),e._UZ(3,"i",16),e._uU(4,"Block "),e.qZA(),e.qZA(),e.TgZ(5,"div",14),e.TgZ(6,"button",17),e._UZ(7,"i",18),e._uU(8,"Delete "),e.qZA(),e.qZA(),e.qZA()}}function v(u,y){if(1&u){const s=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.NdJ("click",function(){const _=e.CHM(s).index,Q=e.oxw();return Q.openOptions[_]=!Q.openOptions[_]}),e.TgZ(3,"div",9),e.TgZ(4,"div",4),e.TgZ(5,"div",9),e.TgZ(6,"mat-hint"),e.TgZ(7,"u"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"div",9),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"div",4),e.TgZ(13,"div",11),e._uU(14),e.ALo(15,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,l,9,0,"div",12),e.qZA(),e.qZA()}if(2&u){const s=y.$implicit,d=y.index,f=e.oxw();e.xp6(8),e.hij(" ",s.sender_email," "),e.xp6(3),e.hij('"',s.message_content,'"'),e.xp6(3),e.hij(" ",e.xi3(15,4,s.message_date,"short")," "),e.xp6(2),e.Q6J("ngIf",f.openOptions[d])}}let i=(()=>{class u{constructor(s,d,f,_){this.apollo=s,this._fetchAPI=d,this._snackbar=f,this.socket=_,this.allMsgs=[],this.openOptions=[]}ngOnInit(){this.socket.on(Y.f.reloadPrivateMessages,()=>{this.loadMsgs()}),this.loadMsgs()}loadMsgs(){this.apollo.watchQuery({query:p.Ps`
        query user_private_messages {
          user_private_messages {
            ID,
            message_content,
            message_date,
            sender_email,
            sender_ID,
            user_ID,
          }
        }
      `}).valueChanges.subscribe(s=>{this.allMsgs=[...s.data.user_private_messages],this.allMsgs.sort((d,f)=>f.ID-d.ID),this.allMsgs.forEach(d=>{this.openOptions.push(!1)})})}userBlockEmail(s){confirm("Are you sure you want to block this email? You will not receive any message from this email anymore, and all the messages from this email will be deteled from your list.")&&this._fetchAPI.postAPI({urlsuffix:"userblockemailfromprivatemessage",body:{msg_ID:s}}).then(_=>{this.loadMsgs(),this._snackbar.open("Blocked successfully","Close")}).catch(_=>{console.log(_.error),console.log(_.error.message,"Close")})}}return u.\u0275fac=function(s){return new(s||u)(e.Y36(T._M),e.Y36(U.a),e.Y36(C.ux),e.Y36(Z.sk))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-private-messages-card"]],decls:18,vars:1,consts:[[1,"container-fluid","p-0"],[1,"text-center","h5","m-0"],[1,"fa-thin","fa-envelope","me-2"],["class","row py-2",4,"ngFor","ngForOf"],[1,"row"],[1,"col","text-end"],[1,"p-0"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],[1,"row","py-2"],[1,"col"],[1,"row",3,"click"],[1,"col","text-end",2,"font-size","10px"],["class","row justify-content-between pt-2",4,"ngIf"],[1,"row","justify-content-between","pt-2"],[1,"col-auto"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa-thin","fa-ban","me-2"],["type","button",1,"btn","btn-sm","btn-danger"],[1,"fa-thin","fa-trash-can","me-2"]],template:function(s,d){1&s&&(e.TgZ(0,"mat-dialog-content"),e.TgZ(1,"div",0),e.TgZ(2,"p",1),e._UZ(3,"i",2),e._uU(4," Your mailbox "),e.qZA(),e.YNc(5,v,17,7,"div",3),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-actions"),e.TgZ(7,"div",0),e.TgZ(8,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"p",6),e.TgZ(11,"mat-hint"),e.TgZ(12,"small"),e._uU(13,"Click on message to see options"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",4),e.TgZ(15,"div",5),e.TgZ(16,"button",7),e._uU(17,"Close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(5),e.Q6J("ngForOf",d.allMsgs))},directives:[x.xY,A.sg,x.H8,I.bx,M.lW,x.ZT,A.O5],pipes:[A.uU],styles:[".btn-sm[_ngcontent-%COMP%]{padding:0 .5rem;font-size:12px}"]}),u})();var m=n(3065),q=n(6410),J=n(8341),F=n(2178),j=n(8007);function D(u,y){1&u&&(e.TgZ(0,"div",5),e._UZ(1,"div",6),e.qZA())}function S(u,y){if(1&u){const s=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",8),e._UZ(2,"div",9),e.TgZ(3,"div",10),e.TgZ(4,"div",11),e.TgZ(5,"div",3),e.TgZ(6,"mat-chip-list",12),e.TgZ(7,"mat-chip",13),e._uU(8,"AzubiViet Card"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"p",14),e._uU(10),e.qZA(),e._UZ(11,"p",15),e.TgZ(12,"div",16),e.TgZ(13,"div",3),e._UZ(14,"i",17),e._uU(15),e.qZA(),e.TgZ(16,"div",3),e._UZ(17,"i",18),e._uU(18),e.qZA(),e.qZA(),e._UZ(19,"mat-progress-bar",19),e.TgZ(20,"mat-hint"),e._uU(21),e.qZA(),e._UZ(22,"div",20),e.TgZ(23,"div",21),e.TgZ(24,"button",22),e._UZ(25,"i",23),e.qZA(),e.TgZ(26,"button",24),e.NdJ("click",function(){return e.CHM(s),e.oxw().openMesssageDialog()}),e._UZ(27,"i",25),e.qZA(),e.TgZ(28,"button",24),e.NdJ("click",function(){return e.CHM(s),e.oxw().openInventory()}),e._UZ(29,"i",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&u){const s=e.oxw();e.xp6(2),e.Jzz("\n                width: 100%;\n                height: 100%;\n                border-top-left-radius: 20px;\n                border-bottom-left-radius: 20px;\n                background-image: url('",s.cdnfolder+s.userinfo.user_avatar.media_name,"');\n                background-position: bottom center;\n                background-size: cover;\n              "),e.xp6(8),e.Oqu(s.userinfo.user_name),e.xp6(5),e.hij(" ",s.userinfo.user_abicoin," "),e.xp6(3),e.hij("Lv. ",s.userinfo.user_level," "),e.xp6(1),e.Q6J("value",s.lvprogress),e.xp6(2),e.AsE("Exp.: ",s.userinfo.user_experience," / ",s.userinfo.levelup_points,"")}}let R=(()=>{class u{constructor(s,d,f,_){this.store=s,this.apollo=d,this.dialog=f,this.bottomSheet=_,this.destroy$=new O.xQ}ngOnInit(){this.apollo.watchQuery({query:p.Ps`
        query user_info {
          user_info {
            user_name,
            user_role,
            user_level,
            levelup_points,
            user_abicoin,
            user_experience,
            user_avatar {
              media_name,
              media_path
            },
            gender,
            defaultconfig {
              userimg_path
            }
          }
        }
      `}).valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(s=>{var d;this.cdnfolder=k.N.BASE_CDN_URL+"/"+(null===(d=s.data.user_info.defaultconfig)||void 0===d?void 0:d.userimg_path),this.userinfo=s.data.user_info,this.lvprogress=this.userinfo.user_experience/this.userinfo.levelup_points*100},s=>{})}openInventory(){this.bottomSheet.open(t.j)}openMesssageDialog(){this.dialog.open(i,{width:"400px"})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return u.\u0275fac=function(s){return new(s||u)(e.Y36(m.yh),e.Y36(T._M),e.Y36(x.uw),e.Y36(q.ch))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-abi-card"]],decls:5,vars:2,consts:[[1,"container","p-0","mb-5","mb-md-0"],[1,"row","justify-content-center"],["class","col",4,"ngIf"],[1,"col-auto"],["class","card",4,"ngIf"],[1,"col"],[2,"width","auto","min-height","250px","background","url('assets/img/landingpage/Marketing_strategy_SVG.svg')\n            no-repeat center center / contain"],[1,"card"],[1,"card-text"],[1,"portada"],[1,"title-total"],[1,"row","pb-3","justify-content-end"],["aria-label","Fish selection"],["color","primary","selected",""],[1,"h5"],[1,"text-end"],[1,"row","justify-content-between","pb-2"],[1,"fa-thin","fa-circle-dollar","me-2"],[1,"fa-thin","fa-crown","me-2"],["mode","determinate",3,"value"],[1,"desc"],[1,"actions"],["mat-button","","color","accent","routerLink","/questionmarket/userprofile"],[1,"fa-thin","fa-folder-gear"],["mat-button","","color","accent",3,"click"],[1,"fa-thin","fa-envelope"],[1,"fa-thin","fa-sack"]],template:function(s,d){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,D,2,0,"div",2),e.TgZ(3,"div",3),e.YNc(4,S,30,9,"div",4),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.Q6J("ngIf",!d.userinfo),e.xp6(2),e.Q6J("ngIf",d.userinfo))},directives:[A.O5,J.qn,J.HS,F.pW,I.bx,M.lW,j.rH],styles:['@import"https://fonts.googleapis.com/css?family=Roboto:400,400i,700";body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin:0;height:100vh;display:grid;align-items:center;justify-items:center;background-image:linear-gradient(to top,#96fbc4 0%,#f9f586 100%)}.card[_ngcontent-%COMP%]{background:rgba(255,255,255,.25);box-shadow:0 8px 32px #caccf15e;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.18);max-width:400px;display:flex;flex-direction:row;border-radius:25px;position:relative}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:0 1rem}.card[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:12px}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);align-items:center;padding:.5rem 1rem}.card-text[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr}.title-total[_ngcontent-%COMP%]{padding:2.5em 1.5em 1.5em}path[_ngcontent-%COMP%]{fill:#fff}.img-portada[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{border:none;background:none;font-size:24px;cursor:pointer;transition:.5s}button[_ngcontent-%COMP%]:hover{transform:rotate(22deg)}']}),u})()},9002:(E,P,n)=>{n.d(P,{j:()=>M});var p=n(1974),O=n(9765),N=n(6782),k=n(2340),t=n(7716),Y=n(5817),e=n(1769),T=n(8583),U=n(2238),C=n(3738);let Z=(()=>{class l{constructor(i){this.data=i}ngOnInit(){}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(U.WI))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-inventory-item-info-card"]],decls:15,vars:3,consts:[[1,"h5"],[1,"row","pb-3"],[1,"col"],[1,"col","text-center"],["width","30",3,"src"]],template:function(i,m){1&i&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-content"),t.TgZ(2,"p",0),t._uU(3),t.qZA(),t.TgZ(4,"div",1),t.TgZ(5,"div",2),t._UZ(6,"mat-divider"),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",3),t._UZ(9,"img",4),t.qZA(),t.qZA(),t.TgZ(10,"p"),t.TgZ(11,"b"),t.TgZ(12,"u"),t._uU(13,"Description: "),t.qZA(),t.qZA(),t._uU(14),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.hij(" ",m.data.item.item_name," "),t.xp6(6),t.Q6J("src",m.data.cdnpath+m.data.item.item_avatar,t.LSH),t.xp6(5),t.hij("",m.data.item.item_description," "))},directives:[C.a8,C.dn,e.d],styles:[""]}),l})(),x=(()=>{class l{constructor(i){this.dialog=i}ngOnInit(){}openDescription(){this.dialog.open(Z,{width:"400px",data:{item:this.item,cdnpath:this.cdnpath}})}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(U.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-single-inventory-item"]],inputs:{item:"item",cdnpath:"cdnpath"},decls:7,vars:2,consts:[[1,"item",3,"click"],[1,"row"],[1,"col","text-center"],["width","30",3,"src"]],template:function(i,m){1&i&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return m.openDescription()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.qZA(),t.TgZ(4,"div",1),t.TgZ(5,"div",2),t._uU(6),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Q6J("src",m.cdnpath+m.item.item_avatar,t.LSH),t.xp6(3),t.hij(" ",m.item.item_quantity," "))},styles:[".item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;border-radius:15px;background:#ffffff;box-shadow:20px 20px 60px #d9d9d9,-20px -20px 60px #fff;width:60px;height:60px;-webkit-border-radius:15px;-moz-border-radius:15px;-ms-border-radius:15px;-o-border-radius:15px}"]}),l})();function A(l,v){if(1&l&&(t.TgZ(0,"div",8),t._UZ(1,"app-single-inventory-item",9),t.qZA()),2&l){const i=v.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("item",i)("cdnpath",m.cdnpath)}}function I(l,v){if(1&l&&(t.TgZ(0,"div",1),t.YNc(1,A,2,2,"div",7),t.qZA()),2&l){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.items)}}let M=(()=>{class l{constructor(i){this.apollo=i,this.destroy$=new O.xQ}ngOnInit(){this.apollo.watchQuery({query:p.Ps`
        query user_info {
          user_info {
            user_name,
            user_role,
            user_level,
            levelup_points,
            user_abicoin,
            user_experience,
            user_avatar {
              media_name,
              media_path
            },
            gender,
            user_inventory {
              ID,
              item_quantity,
              item_name,
              item_code,
              user_ID,
              item_avatar,
              item_description
            },
            defaultconfig {
              userimg_path,
              shopitem_img_path
            }
          }
        }
      `}).valueChanges.pipe((0,N.R)(this.destroy$)).subscribe(i=>{var m;let q=i.data.user_info;this.items=q.user_inventory,this.cdnpath=k.N.BASE_CDN_URL+"/"+(null===(m=q.defaultconfig)||void 0===m?void 0:m.shopitem_img_path)},i=>{console.log(i)})}ngOnDestroy(){this.destroy$.next(!1),this.destroy$.unsubscribe()}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(Y._M))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-user-inventory-card"]],decls:10,vars:1,consts:[[1,"container","p-0"],[1,"row"],[1,"col"],[1,"h5"],["src","assets/img/questionmarket/icons8-treasure-64.png","alt","Inventory","width","40","height","40",1,"me-2"],[1,"row","pb-3"],["class","row",4,"ngIf"],["class","col-auto",4,"ngFor","ngForOf"],[1,"col-auto"],[3,"item","cdnpath"]],template:function(i,m){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"p",3),t._UZ(4,"img",4),t._uU(5," Your Inventory "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",2),t._UZ(8,"mat-divider"),t.qZA(),t.qZA(),t.YNc(9,I,2,1,"div",6),t.qZA()),2&i&&(t.xp6(9),t.Q6J("ngIf",m.items&&m.cdnpath))},directives:[e.d,T.O5,T.sg,x],styles:[""]}),l})()},7270:(E,P,n)=>{n.d(P,{E:()=>$});var p=n(665),O=n(1974),N=n(9765),k=n(6782),t=n(2340),Y=n(9002),e=n(7716),T=n(9786),U=n(7001),C=n(2238),Z=n(8295),x=n(9983),A=n(8583),I=n(1095);function M(a,h){if(1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&a){const r=e.oxw();e.xp6(1),e.hij(" ",r.error_msg," ")}}let l=(()=>{class a{constructor(r,o,g){this.fetchApiMethodsService=r,this._snackbar=o,this.dialogRef=g,this.password=new p.NI("",p.kI.required),this.confirm_password=new p.NI("",p.kI.required)}ngOnInit(){}confirm(){if(this.password.valid&&this.confirm_password.valid){if(this.password.value!=this.confirm_password.value)return void(this.error_msg="Passwort confirm doesn't match");this.error_msg=void 0,this.fetchApiMethodsService.postAPI({urlsuffix:"userchangepassword",body:{user_password:this.password.value}}).then(g=>{this._snackbar.open("Change password successfully, please check your email to confirm your new password.","Close"),this.dialogRef.close()}).catch(g=>{console.log(g.error),this._snackbar.open(g.error.message,"Close")})}}}return a.\u0275fac=function(r){return new(r||a)(e.Y36(T.a),e.Y36(U.ux),e.Y36(C.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-change-passwort-window"]],decls:25,vars:3,consts:[[1,"row"],[1,"col"],[1,"h5","text-center"],["appearance","outline"],["type","password","matInput","","name","Reset password",3,"formControl"],["type","password","matInput","","name","Confirm new password",3,"formControl"],[4,"ngIf"],[1,"row","pb-2"],[1,"col","text-end"],["mat-raised-button","","color","primary",3,"click"],[1,"fa-thin","fa-lock","me-2"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"p",2),e._uU(3,"Change password"),e.qZA(),e.TgZ(4,"mat-form-field",3),e.TgZ(5,"mat-label"),e._uU(6," New password "),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",3),e.TgZ(9,"mat-label"),e._uU(10," Confirm new password "),e.qZA(),e._UZ(11,"input",5),e.qZA(),e.YNc(12,M,2,1,"mat-error",6),e.TgZ(13,"div",7),e.TgZ(14,"div",1),e.TgZ(15,"mat-hint"),e.TgZ(16,"b"),e.TgZ(17,"u"),e._uU(18,"Hint:"),e.qZA(),e.qZA(),e._uU(19," Never use personal information. Include a combination of letters, numbers, and characters. Prioritize password length. Never repeat passwords. Avoid using real words. "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",0),e.TgZ(21,"div",8),e.TgZ(22,"button",9),e.NdJ("click",function(){return o.confirm()}),e._UZ(23,"i",10),e._uU(24,"Confirm "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(7),e.Q6J("formControl",o.password),e.xp6(4),e.Q6J("formControl",o.confirm_password),e.xp6(1),e.Q6J("ngIf",o.error_msg))},directives:[Z.KE,Z.hX,x.Nt,p.Fj,p.JJ,p.oH,A.O5,Z.bx,I.lW,Z.TO],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a})();var v=n(8239),i=n(1841),m=n(728),q=n(2178);function J(a,h){1&a&&(e.TgZ(0,"mat-hint"),e.TgZ(1,"span",12),e._uU(2,"Image uploaded successfully"),e.qZA(),e.qZA())}function F(a,h){if(1&a&&e._UZ(0,"mat-progress-bar",13),2&a){const r=e.oxw();e.Q6J("value",r.upimgformpercent)}}function j(a,h){if(1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&a){const r=e.oxw();e.xp6(1),e.hij(" ",r.uploadimgbyfileinfo," ")}}function D(a,h){1&a&&(e.TgZ(0,"div"),e._UZ(1,"mat-progress-bar",14),e.qZA())}function S(a,h){1&a&&(e.TgZ(0,"mat-hint"),e.TgZ(1,"span",12),e._uU(2,"Image uploaded successfully"),e.qZA(),e.qZA())}function R(a,h){if(1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&a){const r=e.oxw();e.xp6(1),e.hij(" ",r.uploadimgbyurlinfo," ")}}let u=(()=>{class a{constructor(r,o,g,b,c){this._UploadImg=r,this._fetchAPI=o,this._snackbar=g,this.data=b,this.dialogRef=c,this.uploadimgbyfiletoggle=!1,this.uploadimgbyfilesuccess=!1,this.upimgformpercent=0,this.uploadimgbyfileerror=!1,this.uploadimgbyfileinfo="",this.uploadimgbyurltoggle=!1,this.uploadimgbyurlinfo="",this.uploadimgbyurlerror=!1,this.uploadimgbyurlsuccess=!1}ngOnInit(){}uploadfile(r){var o=this;return(0,v.Z)(function*(){if(o.uploadimgbyfilesuccess=!1,o.uploadimgbyfileerror=!1,1==r.files.length){const g="User_Avatar";let b={upload_url_suffix:"uploaduseravatarbyimgfile",inputfile:r.files[0],FileObjName:g,param_variables:(new i.LE).set("file_obj_name",g).set("file_size",parseInt(r.files[0].size))};o._UploadImg.uploadfile(b).subscribe(c=>{switch(c.type){case i.dt.Sent:o.uploadimgbyfiletoggle=!0,console.log("Request has been made!");break;case i.dt.ResponseHeader:console.log("Response header has been received!");break;case i.dt.UploadProgress:var H=Math.round(c.loaded/(c.total?c.total:0)*100);o.upimgformpercent=H,console.log(`Uploaded ${H}%`);break;case i.dt.Response:o.uploadimgbyfilesuccess=!0,o.uploadimgbyfiletoggle=!1,o.dialogRef.close(),o.data.userQuery.refetch(),o._snackbar.open("Change avatar successfully, refresh page to see your new profile.","Close"),console.log("Image Uploaded Successfully!",c.body)}},c=>{console.log("Image not Uploaded!"),o.uploadimgbyfiletoggle=!1,o.uploadimgbyfileerror=!0,o.uploadimgbyfileinfo=c.error.message})}else o.uploadimgbyfileinfo="This image is too large, maximal 25MB..."})()}uploadfilebyurl(r){var o=this;return(0,v.Z)(function*(){o.uploadimgbyurlsuccess=!1,o.uploadimgbyurlerror=!1,""!==r&&o._UploadImg.uploadfilebyurl({body:{img_url:r},upload_url_suffix:"uploaduseravatarbyurl"}).subscribe(c=>{switch(c.type){case i.dt.Sent:o.uploadimgbyurltoggle=!0,console.log("Request has been made!");break;case i.dt.ResponseHeader:console.log("Response header has been received!");break;case i.dt.Response:o.uploadimgbyurltoggle=!1,console.log("Image Uploaded Successfully!",c.body),o.dialogRef.close(),o.data.userQuery.refetch(),o._snackbar.open("Change avatar successfully, refresh page to see your new profile.","Close"),o.uploadimgbyurlsuccess=!0}},c=>{console.log("Image not Uploaded!"),o.uploadimgbyurltoggle=!1,o.uploadimgbyurlerror=!0,o.uploadimgbyurlinfo=c.error.message})})()}}return a.\u0275fac=function(r){return new(r||a)(e.Y36(m.c),e.Y36(T.a),e.Y36(U.ux),e.Y36(C.WI),e.Y36(C.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-change-user-avatar-dialog"]],decls:21,vars:6,consts:[[1,"row","my-3"],[1,"col"],[1,"mb-3"],["for","formFile",1,"form-label"],["type","file",1,"form-control",3,"input"],[4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],[1,"mt-3"],[1,"input-group","my-3"],["type","text","aria-describedby","button-addon2",1,"form-control"],["urltreeavatar",""],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"text-success"],["mode","determinate",3,"value"],["mode","query"]],template:function(r,o){if(1&r){const g=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e.TgZ(4,"strong"),e._uU(5,"Question avatar (Required)"),e.qZA(),e.qZA(),e.TgZ(6,"input",4),e.NdJ("input",function(c){return o.uploadfile(c.target)}),e.qZA(),e.qZA(),e.YNc(7,J,3,0,"mat-hint",5),e.YNc(8,F,1,1,"mat-progress-bar",6),e.YNc(9,j,2,1,"mat-error",5),e.TgZ(10,"div",7),e.TgZ(11,"mat-label"),e._uU(12," Or use an image url "),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"input",9,10),e.TgZ(16,"button",11),e.NdJ("click",function(){e.CHM(g);const c=e.MAs(15);return o.uploadfilebyurl(c.value)}),e._uU(17," Submit "),e.qZA(),e.qZA(),e.YNc(18,D,2,0,"div",5),e.YNc(19,S,3,0,"mat-hint",5),e.YNc(20,R,2,1,"mat-error",5),e.qZA(),e.qZA(),e.qZA()}2&r&&(e.xp6(7),e.Q6J("ngIf",o.uploadimgbyfilesuccess),e.xp6(1),e.Q6J("ngIf",o.uploadimgbyfiletoggle),e.xp6(1),e.Q6J("ngIf",o.uploadimgbyfileerror),e.xp6(9),e.Q6J("ngIf",o.uploadimgbyurltoggle),e.xp6(1),e.Q6J("ngIf",o.uploadimgbyurlsuccess),e.xp6(1),e.Q6J("ngIf",o.uploadimgbyurlerror))},directives:[A.O5,Z.hX,Z.bx,q.pW,Z.TO],styles:[""]}),a})();var y=n(3065),s=n(5817),d=n(6410),f=n(3738),_=n(2613),Q=n(1769);function z(a,h){if(1&a){const r=e.EpF();e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"div"),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return e.CHM(r),e.oxw().changeAvatar()}),e._UZ(9,"i",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"mat-form-field"),e.TgZ(12,"mat-label"),e._uU(13," User name "),e.qZA(),e._UZ(14,"input",10),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e.TgZ(17,"mat-radio-group",13),e.TgZ(18,"div",14),e.TgZ(19,"div",15),e.TgZ(20,"mat-radio-button",16),e._uU(21,"Male"),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"mat-radio-button",17),e._uU(24,"Female"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",18),e.TgZ(26,"div",19),e.TgZ(27,"button",7),e.NdJ("click",function(){return e.CHM(r),e.oxw().saveInfo()}),e._UZ(28,"i",20),e._uU(29,"Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",21),e.TgZ(31,"div",15),e.TgZ(32,"button",22),e.NdJ("click",function(){return e.CHM(r),e.oxw().changePassword()}),e._UZ(33,"i",23),e._uU(34," Change password "),e.qZA(),e.qZA(),e.TgZ(35,"div",15),e.TgZ(36,"button",22),e.NdJ("click",function(){return e.CHM(r),e.oxw().openInventory()}),e._UZ(37,"i",24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",11),e.TgZ(39,"div",12),e._UZ(40,"mat-divider"),e.qZA(),e.qZA(),e.TgZ(41,"div",25),e.TgZ(42,"div",15),e._UZ(43,"i",26),e._uU(44," 24 "),e.qZA(),e.TgZ(45,"div",15),e._UZ(46,"i",27),e._uU(47," 2 "),e.qZA(),e.qZA(),e.TgZ(48,"div",28),e.TgZ(49,"div",12),e._UZ(50,"mat-progress-bar",29),e.TgZ(51,"mat-hint"),e._uU(52),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const r=e.oxw();e.xp6(1),e.Q6J("formGroup",r.userForm),e.xp6(4),e.Jzz("\n                    width: 60px;\n                    height: 60px;\n                    background: url('",r.cdnfolder+r.userinfo.user_avatar.media_name,"') no-repeat center center / cover;\n            border-radius: 50%;\n            box-shadow: 0 9px 30px 0 rgb(119 63 254 / 38%), inset 0 -9px 6px 0 #cd9bfb73;\n                "),e.xp6(45),e.Q6J("value",r.lvprogress),e.xp6(2),e.AsE("Exp.: ",r.userinfo.user_experience," / ",r.userinfo.levelup_points,"")}}let $=(()=>{class a{constructor(r,o,g,b,c,w){this.store=r,this.apollo=o,this.dialog=g,this.bottomSheet=b,this.fetchApiMethodsService=c,this._snackbar=w,this.userForm=new p.cw({user_name:new p.NI("",p.kI.required),user_gender:new p.NI("Male",p.kI.required)}),this.destroy$=new N.xQ}ngOnInit(){this.userQuery=this.apollo.watchQuery({query:O.Ps`
        query user_info {
          user_info {
            user_name,
            user_role,
            user_level,
            levelup_points,
            user_experience,
            user_avatar {
              media_name,
              media_path
            },
            gender,
            defaultconfig {
              userimg_path
            }
          }
        }
      `}),this.userQuery.valueChanges.pipe((0,k.R)(this.destroy$)).subscribe(r=>{var o;this.cdnfolder=t.N.BASE_CDN_URL+"/"+(null===(o=r.data.user_info.defaultconfig)||void 0===o?void 0:o.userimg_path),this.userinfo=r.data.user_info,this.lvprogress=this.userinfo.user_experience/this.userinfo.levelup_points*100,this.userForm.controls.user_name.setValue(this.userinfo.user_name),this.userForm.controls.user_gender.setValue(this.userinfo.gender)},r=>{})}saveInfo(){if(this.userForm.controls.user_name.valid&&this.userForm.controls.user_gender.valid){let r=window.prompt("Enter your password to confirm your changes...");this.fetchApiMethodsService.postAPI({urlsuffix:"userupdateprofile",body:{user_name:this.userForm.controls.user_name.value,user_password:r,gender:this.userForm.controls.user_gender.value}}).then(c=>{var w;null===(w=this.userQuery)||void 0===w||w.refetch(),this._snackbar.open("User profile updated successfully","Close")}).catch(c=>{console.log(c.error),this._snackbar.open(c.error.message,"Close")})}}openInventory(){this.bottomSheet.open(Y.j)}changePassword(){this.dialog.open(l,{width:"400px"})}changeAvatar(){this.dialog.open(u,{data:{userinfo:this.userinfo,userQuery:this.userQuery}})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return a.\u0275fac=function(r){return new(r||a)(e.Y36(y.yh),e.Y36(s._M),e.Y36(C.uw),e.Y36(d.ch),e.Y36(T.a),e.Y36(U.ux))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-profile-card"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"container","p-0"],[1,"row","align-items-center","pb-3"],[1,"col-4","d-flex","flex-column","align-items-center",2,"height","fit-content"],[1,"row","pt-3"],[1,"col","text-center"],["mat-raised-button","","color","accent",3,"click"],[1,"fa-solid","fa-camera"],[1,"col-8",2,"height","fit-content"],["type","text","matInput","","autocomplete","off","formControlName","user_name"],[1,"row","pb-3"],[1,"col"],["formControlName","user_gender"],[1,"row","justify-content-around"],[1,"col-auto"],["value","Male"],["value","Female"],[1,"row"],[1,"col","text-end"],[1,"fa-solid","fa-floppy-disk","me-2"],[1,"row","justify-content-center","pb-3"],["mat-raised-button","",3,"click"],[1,"fa-solid","fa-key","me-2"],[1,"fa-solid","fa-sack"],[1,"row","pb-3","justify-content-around"],[1,"fa-thin","fa-circle-dollar","me-2"],[1,"fa-thin","fa-crown","me-2"],[1,"row","pb-2"],["mode","determinate",3,"value"]],template:function(r,o){1&r&&e.YNc(0,z,53,7,"mat-card",0),2&r&&e.Q6J("ngIf",o.userinfo)},directives:[A.O5,f.a8,f.dn,p.JL,p.sg,I.lW,Z.KE,Z.hX,x.Nt,p.Fj,p.JJ,p.u,_.VQ,_.U0,Q.d,q.pW,Z.bx],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a})()}}]);